!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="68fe0cf5-e500-4777-9a03-7092cb390074",e._sentryDebugIdIdentifier="sentry-dbid-68fe0cf5-e500-4777-9a03-7092cb390074")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{908:function(e,t,r){r.d(t,{S:function(){return s}});var n=r(97458);let s=(0,r(52983).forwardRef)((e,t)=>{let{as:r,dataCy:s,renderAs:a,ariaLabel:o,...l}=e;return(0,n.jsx)(null!=r?r:"button",{as:a,"data-cy":s,"aria-label":o,ref:t,...l})})},13615:function(e,t,r){r.d(t,{E:function(){return f}});var n=r(97458),s=r(79235),a=r(37727),o=r(770),l=r(57291),i=r(52983),c=r(17722),u=r(679),d=r(94918);let f=(0,i.forwardRef)((e,t)=>{let{label:r,icon:i,as:f,className:x,dataCy:m,canUseTool:h,blockStatus:g,isPremiumAction:p,hideTooltip:b,isNewAction:v,...w}=e,j=(0,s.nD)();return(0,n.jsx)(c.B,{blockStatus:g,container:j.current,children:(0,n.jsxs)(a.Y,{as:null!=f?f:"button",className:(0,l.cx)("flex items-center gap-2 rounded-full px-4 py-2 text-surface-foreground-2 bg-surface-2 hover:bg-surface-3 flex-shrink-0 text-sm font-semibold",x),ref:t,"data-cy":m,disabled:!!g,...w,children:[i&&(0,n.jsx)(o.J,{as:i,size:"sm"}),r,(0,n.jsx)(d.L,{canUseTool:h,blockStatus:g,isPremiumAction:p}),v&&(0,n.jsx)(u.b,{})]})})})},51074:function(e,t,r){r.d(t,{K:function(){return l}});var n=r(97458),s=r(30088),a=r(10893),o=r(13615);let l=e=>{let{onClick:t,blockStatus:r}=e,{t:l}=(0,a.$G)("editTools");return(0,n.jsx)(o.E,{icon:s.Z,label:l("assistant.name"),onClick:t,dataCy:"assistant",disabled:!!r,blockStatus:r})}},25413:function(e,t,r){r.d(t,{u:function(){return D}});var n=r(97458),s=r(86101),a=r(2200),o=r(770),l=r(96065),i=r(24173),c=r(57291),u=r(10893),d=r(52983),f=r(79235),x=r(84559),m=r(14417),h=r(41937),g=r(90312),p=r(66906),b=r(37112),v=r(17842),w=r(94860),j=r(81219);let y=["image/jpeg","image/jpg","image/png"],N=e=>{let{t}=(0,u.$G)("common"),{openToast:r}=(0,v.x_)(),[n,s]=(0,d.useState)(!1),a=(0,h.I)(),o=(0,d.useRef)(null),{setLoginCookies:l,signUpUrl:i}=(0,g.e)();return{handleUploadFile:async n=>{var a,o;n.preventDefault(),n.stopPropagation();let l=n.currentTarget,i=null===(a=l.files)||void 0===a?void 0:a[0];if(i){s(!0);try{let r=k(i);if(r)throw Error(t(r.message,"dimension"===r.type?{size:(0,p.R)(13631488)}:{format1:"JPG",format2:"PNG"}));let n=URL.createObjectURL(i),{name:s,type:a}=i,l=null!==(o=s.split(".").pop())&&void 0!==o?o:"",{uploadUrl:c,downloadUrl:u}=await (0,w.c)(l),d=await (0,b.m)(n);if(!(await (0,j.o)(c,d,a)).ok)throw Error(t("errorMessage"));e(u,i)}catch(e){r({type:"danger",title:t("errorTitle"),message:e instanceof Error?e.message:"error uploading image"})}finally{l.value="",s(!1)}}},handleFromDeviceClick:()=>{var e;if(a){l(),window.location.href=i;return}null===(e=o.current)||void 0===e||e.click()},isUploading:n,inputRef:o}},k=e=>e&&y.includes(e.type)?e.size>13631488?{message:"tooBig",type:"dimension"}:void 0:{message:"formatUnsuported",type:"format"},C=e=>{let{onAddAsset:t,className:r,...a}=e,{t:l}=(0,u.$G)("editTools"),{handleUploadFile:i,isUploading:d,inputRef:h,handleFromDeviceClick:g}=N(t),p=(0,f.nD)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:i,ref:h}),(0,n.jsx)(s.u,{backgroundColor:"grayEbony",colorText:"white",container:p.current,trigger:(0,n.jsx)("button",{className:(0,c.cx)("inline-flex size-8 items-center justify-center rounded-full border border-surface-border-alpha-1 hover:bg-surface-1 text-surface-foreground-1",r),onClick:g,disabled:d,"aria-label":l("assistant.addAsset"),...a,children:d?(0,n.jsx)(o.J,{as:x.Z,className:"animate-spin"}):(0,n.jsx)(o.J,{as:m.Z,size:"sm"})}),children:l("assistant.addAsset")})]})},A=e=>{let{sendToAssistant:t}=e,[r,n]=(0,d.useState)(""),[s,a]=(0,d.useState)([]),o=()=>{let e=r.trim();e&&(t({prompt:e,images:s.join(","),submit:"true"}),n(""),a([]))};return{prompt:r,assets:s,handleInputChange:e=>{n(e.target.value)},handleInputKeyDown:e=>{"Enter"===e.key&&(o(),e.preventDefault()),("ArrowLeft"===e.key||"ArrowRight"===e.key)&&e.stopPropagation()},addAsset:e=>{a(t=>[...t,e])},send:o,removeAsset:e=>()=>{a(t=>t.filter(t=>t!==e))}}},D=(0,d.forwardRef)(function(e,t){let{className:r,placeholder:s,showPrompt:a,sendToAssistant:o}=e,{prompt:l,assets:i,handleInputChange:u,handleInputKeyDown:d,addAsset:f,send:x,removeAsset:m}=A({sendToAssistant:o});return(0,n.jsx)("div",{className:(0,c.cx)("overflow-hidden w-full max-w-full md:max-w-3xl transition-all",a?"h-20 ease-in":"h-0 ease-out"),children:(0,n.jsxs)("div",{className:(0,c.cx)("flex items-center justify-center gap-4 rounded-full border-surface-2 bg-surface-2 p-2 mt-4",r),children:[(0,n.jsx)(C,{onAddAsset:f,className:"shrink-0"}),i.map(e=>(0,n.jsx)(z,{url:e,onRemove:m(e)},e)),(0,n.jsx)(R,{value:l,onChange:u,onKeyDown:d,placeholder:s,ref:t}),(0,n.jsx)(E,{onSend:x,className:"shrink-0"})]})})}),z=e=>{let{url:t,onRemove:r}=e;return(0,n.jsxs)("div",{className:"relative size-8 rounded-lg bg-white outline outline-1 outline-offset-2 outline-neutral-100",children:[(0,n.jsx)("img",{src:t,alt:"",className:"size-full rounded object-cover"}),(0,n.jsx)("button",{onClick:r,className:"absolute -right-2 -top-2 inline-flex items-center justify-center rounded-full border border-neutral-400 bg-white p-1 hover:bg-neutral-50",children:(0,n.jsx)(o.J,{as:l.Z,size:"3xs"})})]})},E=e=>{let{onSend:t,className:r}=e,{t:l}=(0,u.$G)("editTools"),d=(0,a.n)();return(0,n.jsx)(s.u,{backgroundColor:"grayEbony",colorText:"white",container:d.current,trigger:(0,n.jsx)("button",{className:(0,c.cx)("inline-flex size-8 items-center justify-center rounded-full border bg-surface-foreground-0 hover:bg-surface-foreground-1 text-surface-0",r),onClick:t,type:"button","aria-label":l("assistant.send"),children:(0,n.jsx)(o.J,{as:i.Z,size:"sm"})}),children:l("assistant.send")})},R=(0,d.forwardRef)(function(e,t){let{value:r,onChange:s,onKeyDown:a,placeholder:o}=e;return(0,n.jsx)("input",{type:"text",placeholder:o,className:"w-full flex-1 rounded-full border-surface-2 bg-transparent px-2 text-surface-foreground-2 placeholder:text-surface-foreground-4 focus-visible:outline-none",value:r,onChange:s,onKeyDown:a,ref:t})})},54601:function(e,t,r){r.d(t,{O:function(){return s}});var n=r(52983);let s=e=>{let{checkIsAssistantRestricted:t}=e,[r,s]=(0,n.useState)(!1),a=(0,n.useRef)(null);return{showPrompt:r,handleTogglePrompt:()=>{if(t())return;let e=!r;s(e),e&&a.current&&a.current.focus()},promptRef:a}}},679:function(e,t,r){r.d(t,{b:function(){return s}});var n=r(97458);let s=()=>(0,n.jsx)("span",{className:"rounded-full bg-primary-0 px-2 py-1 text-2xs font-semibold uppercase text-primary-foreground-0",children:"NEW"})},94918:function(e,t,r){r.d(t,{L:function(){return c}});var n=r(97458),s=r(770),a=r(9249),o=r(92336),l=r(83273),i=r(10893);let c=e=>{let{canUseTool:t=!0,blockStatus:r=!1,isPremiumAction:c=!1}=e,{t:u}=(0,i.$G)("common"),d=c&&!t&&!r;return c?(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsx)(s.J,{as:l.Z,size:"sm",className:"text-premium-gold-500"}),!d&&(0,n.jsx)(s.J,{as:o.Z,size:"sm"}),(0,n.jsx)(a.T,{children:u("premium")})]}):null}},30221:function(e,t,r){r.d(t,{h:function(){return i}});var n=r(97458),s=r(95109),a=r(10893),o=r(52983),l=r(40197);let i=(0,o.forwardRef)(function(e,t){let{featured:r,className:o,children:i}=e,{t:c}=(0,a.$G)("common");return(0,n.jsxs)("div",{ref:t,className:(0,l.m6)("relative flex min-h-[60px] max-w-full items-center gap-4 overflow-hidden justify-center",o),children:[r&&(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)(s.DraggableNavigation,{arrowDataCy:"detail-smart-bar",arrowPrevAriaLabel:c("previous"),arrowNextAriaLabel:c("next"),children:(0,n.jsx)("div",{className:"flex gap-4",children:r})})}),i]})})},33799:function(e,t,r){r.d(t,{u:function(){return u}});var n=r(97458),s=r(79235),a=r(66827),o=r(770),l=r(96065),i=r(57291),c=r(10893);let u=e=>{let{children:t,onClose:r,className:o,dataCy:l}=e,c=(0,s.nD)();return(0,n.jsx)(a.fC,{open:!0,modal:!0,onOpenChange:r,children:(0,n.jsx)(a.h_,{container:c.current,children:(0,n.jsx)(a.aV,{className:"fixed inset-0 flex items-center justify-center bg-neutral-900/90",children:(0,n.jsxs)(a.VY,{"data-cy":l,className:(0,i.cx)("fixed inset-0 overflow-y-auto bg-surface-0 p-10 pt-10 xs:pt-14 text-surface-foreground-0 shadow-md xs:relative xs:mx-5 xs:my-auto xs:max-h-[95vh] max-w-full xs:max-w-[95vw] xs:rounded-xl xs:p-10 dark:bg-surface-1",o),children:[(0,n.jsx)(d,{onClose:r}),t]})})})})},d=e=>{let{onClose:t}=e,{t:r}=(0,c.$G)("common");return(0,n.jsx)("button",{onClick:t,title:r("close"),className:"absolute right-2 top-2 p-2 text-surface-foreground-2 hover:text-surface-foreground-0 xs:right-4 xs:top-4 sm:right-6 sm:top-6","aria-label":r("close"),children:(0,n.jsx)(o.J,{as:l.Z})})}},94860:function(e,t,r){r.d(t,{c:function(){return n}});let n=async e=>{let t=await fetch("/api/storage-upload-url?extension=".concat(e));if(!t.ok)throw Error("Error fetching api storimageUrlToBlobage upload url");return await t.json()}},81219:function(e,t,r){r.d(t,{o:function(){return n}});let n=async(e,t,r)=>await fetch(e,{method:"PUT",body:t,headers:{"Content-Type":r,"X-Goog-Content-Length-Range":"0,13000000"}})},84559:function(e,t,r){var n=r(97458);t.Z=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,n.jsx)("path",{d:"M255.887 438.4c-100.6 0-182.4-81.8-182.4-182.4s81.8-182.4 182.4-182.4c61.1 0 117.9 30.4 151.8 81.3 7.7 11.5 4.6 27-6.9 34.7s-27 4.6-34.7-6.9c-24.6-37-65.9-59.1-110.2-59.1-73 0-132.4 59.4-132.4 132.4s59.4 132.4 132.4 132.4c44.4 0 85.6-22.1 110.2-59.1 7.7-11.5 23.2-14.6 34.7-6.9s14.6 23.2 6.9 34.7c-33.9 50.9-90.7 81.3-151.8 81.3"})})},24173:function(e,t,r){var n=r(97458);t.Z=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 504.671 504.671",width:16,height:16,"aria-hidden":!0,...e,children:(0,n.jsx)("path",{d:"m375.749 486.444 127.986-454.67c2.45-8.704.008-18.056-6.387-24.452S481.6-1.514 472.896.935L18.227 128.922A25.002 25.002 0 0 0 7.259 170.6l84.665 85.288-14.793 144.231a25.002 25.002 0 0 0 27.421 27.421l144.232-14.793 85.288 84.665a25 25 0 0 0 23.976 6.435 25 25 0 0 0 17.701-17.403M142.87 249.221a25 25 0 0 0-7.128-20.163l-63.058-63.521L394.316 75 134.045 335.27zm132.743 119.707a25 25 0 0 0-20.163-7.128l-86.05 8.826 260.272-260.272-90.537 321.632z"})})},58045:function(e,t,r){var n=r(97458);t.Z=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:16,height:16,"aria-hidden":!0,...e,children:(0,n.jsx)("path",{d:"M21.656 15.346v-.487c0-3.444-1.864-6.585-4.737-8.296h5.91a1.172 1.172 0 1 0 0-2.344H15.31A3.52 3.52 0 0 0 12 1.875c-1.527 0-2.827.98-3.31 2.344H1.172a1.172 1.172 0 1 0 0 2.343H7.08c-2.873 1.712-4.737 4.853-4.737 8.297v.486A3.52 3.52 0 0 0 0 18.657a3.52 3.52 0 0 0 3.516 3.516 3.52 3.52 0 0 0 3.515-3.516c0-1.527-.98-2.826-2.343-3.31v-.487c0-3.108 2.006-5.888 4.92-6.899a3.5 3.5 0 0 0 4.784 0c2.914 1.011 4.92 3.79 4.92 6.9v.486a3.52 3.52 0 0 0-2.343 3.31 3.52 3.52 0 0 0 3.515 3.515A3.52 3.52 0 0 0 24 18.656c0-1.527-.98-2.826-2.344-3.31m-18.14 4.482a1.173 1.173 0 0 1-1.172-1.172c0-.646.526-1.172 1.172-1.172s1.172.526 1.172 1.172-.526 1.172-1.172 1.172M12 6.563a1.174 1.174 0 0 1-1.172-1.172c0-.646.526-1.172 1.172-1.172s1.172.526 1.172 1.172S12.646 6.563 12 6.563m8.484 13.265a1.173 1.173 0 0 1-1.172-1.172c0-.646.526-1.172 1.172-1.172s1.172.526 1.172 1.172-.525 1.172-1.172 1.172"})})},37112:function(e,t,r){r.d(t,{m:function(){return n}});let n=e=>fetch(e).then(e=>e.blob())}}]);